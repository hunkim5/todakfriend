<!DOCTYPE html>
<html lang="ko"
		xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout/web_layout}">

<th:block layout:fragment="css">
<link href="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote-lite.min.css" rel="stylesheet">
</th:block>
<th:block layout:fragment="content">
<form method="post" id="saveForm" enctype="multipart/form-data">
<input type="hidden" name="recruitSeq" th:value="${data.recruitSeq}">
<input type="hidden" name="uuid" th:value="${data.uuid}">
<div class="mt-5 p-4 bg-white rounded shadow-sm">
  <h4 class="mb-4">êµ¬ì¸ ì •ë³´ ì…ë ¥</h4>
    <div class="row g-3">
      <!-- ì—…ì²´ëª…-->
      <div class="col-md-4">
        <label for="storeName" class="form-label">ì—…ì²´ëª…</label>
        <input type="text" class="form-control" id="storeName" name="storeName" placeholder="ì˜ˆ: ìŠ¤ìœ„íŠ¸í™ˆ" th:value="${data.storeName}">
      </div>
      <!-- ê¸‰ì—¬í˜•íƒœ -->
      <div class="col-md-4">
        <label for="salaryType" class="form-label">ê¸‰ì—¬ í˜•íƒœ</label>
        <select class="form-select" id="salaryType" name="salaryType">
          <option value="consul">ê¸‰ì—¬í˜‘ì˜</option>
          <option value="each">ê±´ë‹¹</option>
          <option value="tc">T/C</option>
        </select>
      </div>

      <!-- ê¸‰ì—¬ -->
      <div class="col-md-4">
        <label for="salary" class="form-label">ê¸‰ì—¬</label>
        <input type="text" class="form-control" id="salary" name="salary" placeholder="ì˜ˆ: 150,000ì›" th:value="${data.salary}">
      </div>

      <!-- ì—°ë ¹ -->
      <div class="col-md-4">
        <label for="age" class="form-label">ì—°ë ¹</label>
        <input type="text" class="form-control" id="age" name="age" placeholder="ì˜ˆ: 25ì„¸ ~ 35ì„¸" th:value="${data.age}">
      </div>

      <!-- ì„±ë³„ -->
      <div class="col-md-4">
        <label for="sex" class="form-label">ì„±ë³„</label>
        <select class="form-select" id="sex" name="sex">
          <option value="male">ë‚¨</option>
          <option value="female">ì—¬</option>
          <option value="both">ë¬´ê´€</option>
        </select>
      </div>

	   <div class="col-md-4">
        <label for="companyType" class="form-label">ì—…ì¢…</label>
        <select class="form-select" id="companyType" name="companyType">
          <option value="hoppa">í˜¸ë¹ </option>
          <option value="massage">ë§ˆì‚¬ì§€</option>
          <option value="etc">ê¸°íƒ€êµ¬ì¸</option>
        </select>
      </div>
      <!-- ë‹´ë‹¹ì -->
      <div class="col-md-4">
        <label for="manager" class="form-label">ë‹´ë‹¹ì</label>
        <input type="text" class="form-control" id="manager" name="manager" placeholder="ì˜ˆ: í™ê¸¸ë™" th:value="${data.manager}">
      </div>
	  <div class="col-md-4">
        <label for="location" class="form-label">ì§€ì—­ ì„ íƒ</label>
        <select class="form-select" id="location" name="location">
          <option value="ì„œìš¸íŠ¹ë³„ì‹œ,ì¸ì²œê´‘ì—­ì‹œ,ê²½ê¸°ë„">ì„œìš¸íŠ¹ë³„ì‹œ,ì¸ì²œê´‘ì—­ì‹œ,ê²½ê¸°ë„</option>
          <option value="ëŒ€ì „ê´‘ì—­ì‹œ,ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ,ì¶©ì²­ë¶ë„,ì¶©ì²­ë‚¨ë„">ëŒ€ì „ê´‘ì—­ì‹œ,ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ,ì¶©ì²­ë¶ë„,ì¶©ì²­ë‚¨ë„</option>
          <option value="ëŒ€êµ¬ê´‘ì—­ì‹œ,ê²½ìƒë¶ë„">ëŒ€êµ¬ê´‘ì—­ì‹œ,ê²½ìƒë¶ë„</option>
          <option value="ê´‘ì£¼ê´‘ì—­ì‹œ,ì „ë¼ë¶ë„,ì „ë¼ë‚¨ë„">ê´‘ì£¼ê´‘ì—­ì‹œ,ì „ë¼ë¶ë„,ì „ë¼ë‚¨ë„</option>
          <option value="ë¶€ì‚°ê´‘ì—­ì‹œ,ìš¸ì‚°ê´‘ì—­ì‹œ,ê²½ìƒë‚¨ë„">ë¶€ì‚°ê´‘ì—­ì‹œ,ìš¸ì‚°ê´‘ì—­ì‹œ,ê²½ìƒë‚¨ë„</option>
          <option value="ì œì£¼íŠ¹ë³„ìì¹˜ë„,ê°•ì›íŠ¹ë³„ìì¹˜ë„">ì œì£¼íŠ¹ë³„ìì¹˜ë„,ê°•ì›íŠ¹ë³„ìì¹˜ë„</option>
        </select>
      </div>
      <!-- ê·¼ë¬´ì§€ì—­ -->
      <div class="col-md-4">
        <label for="addr" class="form-label">ê·¼ë¬´ ì§€ì—­</label>
        <input type="text" class="form-control" id="addr" name="addr" placeholder="ì˜ˆ: ì„œìš¸ ê°•ë‚¨êµ¬" th:value="${data.addr}">
      </div>

      <!-- ì—°ë½ì²˜ -->
      <div class="col-md-4">
        <label for="phone" class="form-label">ì—°ë½ì²˜</label>
        <input type="text" class="form-control" id="phoneNumber" name="phoneNumber" placeholder="ì˜ˆ: 010-1234-5678" th:value="${data.phoneNumber}">
      </div>

      <!-- ì¹´ì¹´ì˜¤í†¡ -->
      <div class="col-md-4">
        <label for="kakao" class="form-label">ì¹´ì¹´ì˜¤í†¡ ID</label>
        <input type="text" class="form-control" id="kakao" name="kakao" placeholder="ì˜ˆ: todakfriend" th:value="${data.kakao}">
      </div>

      <!-- ë¼ì¸ -->
      <div class="col-md-4">
        <label for="line" class="form-label">ë¼ì¸ ID</label>
        <input type="text" class="form-control" id="line" name="line" placeholder="ì˜ˆ: todakline" th:value="${data.line}">
      </div>
	  <!-- ì²¨ë¶€íŒŒì¼ -->
		<div class="col-12">
	        <label for="attachment" class="form-label">ì—…ì²´ ì´ë¯¸ì§€</label>
	        <input type="file" class="form-control" id="attachment" name="attachment" >
	    </div>
	    <!-- ì—…ë¡œë“œëœ íŒŒì¼ í‘œì‹œ ì˜ì—­ -->
	    <div class="col-12" th:if="${not #strings.isEmpty(data.filePath)}" id="fileArea">
	        <div class="mt-2 border p-2 bg-light d-flex justify-content-between align-items-center" >
	          <div>
	            ğŸ“ <a th:href="@{${data.imgPath}}" th:text="${data.orgFileName}" download></a>
	          </div>
	          <button type="button" class="btn btn-sm btn-outline-danger" th:data-uuid="${data.uuid}" onclick="deleteFile(this)">ì‚­ì œ</button>
	        </div>
	    </div>
      <!-- ëª¨ì§‘ë‚´ìš© -->
      <div class="col-12">
        <label for="description" class="form-label">ëª¨ì§‘ ë‚´ìš©</label>
        <textarea class="form-control" id="summernote" name="content" rows="30" th:text="${data.content}" placeholder="ë¶€ì ì ˆí•˜ê±°ë‚˜ ë¶ˆì¾Œê°ì„ ì¤„ ìˆ˜ ìˆëŠ” ì»¨í…ì¸ ëŠ” ì œì¬ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤." required></textarea>
      </div>
    </div>

    </div>
    <!-- ì œì¶œ ë²„íŠ¼ -->
    <div class="text-end mt-4">
      <button type="button" id="save" class="btn btn-primary">ë“±ë¡í•˜ê¸°</button>
      <button onclick="changeView('/web/permit/recruit/list')" class="btn btn-outline-secondary">
         <i class="bi bi-arrow-left"></i>ëª©ë¡ìœ¼ë¡œ
       </button>
    </div>
</form>
</th:block>
<th:block layout:fragment="script">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote-lite.min.js"></script>
<script>
$(document).ready(function(){
	let seq = "[[${data.recruitSeq}]]";
	if(seq > 0){
		$("#companyType").val("[[${data.companyType}]]");
	}
});
function changeView(val){
	$("#saveForm").attr("action",val);
	$("#saveForm").submit();
}

$(document).ready(function() {
	$('#summernote').summernote({
    	height:400
    });
	$('#save').click(function (e) {
	    e.preventDefault();

	    const form = document.getElementById('saveForm');
	    const formData = new FormData(form);
	    $.ajax({
            url: "/web/recruit/save",
            type: "POST",
            data: formData,
            processData: false,
            contentType: false,
            success: function(response) {
                alert("ì €ì¥ ì„±ê³µ!");
                changeView("/web/permit/recruit/list");
            },
            error: function(response) {
                alert(response.responseText);
            }
        });
	}); //~save
});
function deleteFile(val){
	let uuid = val.dataset.uuid;
	let arr ={
			fileGroupUuid :uuid
	}
	$.ajax({
        url: "/common/deleteFile",
        type: "POST",
        data: JSON.stringify(arr),
        contentType : "application/json; charset=UTF-8",
        success: function(response) {
            alert("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            $("#fileArea").html('');
        },
        error: function(response) {
        	console.log(response.responseText);
        }
    });
}
</script>
</th:block>